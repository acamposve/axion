{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/a.campos/source/repos/ionicaxion/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _LoginPage;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/api.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@angular/forms\";\nexport class LoginPage {\n  constructor(apiService, router,\n  // Inyecta Router\n  toastController // Inyecta ToastController\n  ) {\n    this.apiService = apiService;\n    this.router = router;\n    this.toastController = toastController;\n    this.phoneNumber = \"\";\n    this.password = \"\";\n  }\n  login() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const loginData = {\n        phoneNumber: _this.phoneNumber,\n        password: _this.password\n      };\n      _this.apiService.login(loginData).subscribe( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (response) {\n          console.log('Response from API:', response); // <-- Agregado aquí\n          if (response === 'Login successful.') {\n            // Ajusta según tu respuesta\n            _this.router.navigate(['/home']); // Navega a la página home\n          } else {\n            // Muestra un toast con el error\n            const toast = yield _this.toastController.create({\n              message: response,\n              // Usa el mensaje de error\n              duration: 2000,\n              color: 'danger' // Color del toast\n            });\n            toast.present();\n          }\n        });\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    })();\n  }\n}\n_LoginPage = LoginPage;\n_LoginPage.ɵfac = function LoginPage_Factory(__ngFactoryType__) {\n  return new (__ngFactoryType__ || _LoginPage)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.ToastController));\n};\n_LoginPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _LoginPage,\n  selectors: [[\"app-login\"]],\n  decls: 16,\n  vars: 2,\n  consts: [[3, \"ngSubmit\"], [\"position\", \"floating\"], [\"name\", \"phoneNumber\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"name\", \"password\", \"type\", \"password\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"expand\", \"full\", \"type\", \"submit\"]],\n  template: function LoginPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-title\");\n      i0.ɵɵtext(3, \"Login\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(4, \"ion-content\")(5, \"form\", 0);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginPage_Template_form_ngSubmit_5_listener() {\n        return ctx.login();\n      });\n      i0.ɵɵelementStart(6, \"ion-item\")(7, \"ion-label\", 1);\n      i0.ɵɵtext(8, \"N\\u00FAmero de celular\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"ion-input\", 2);\n      i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginPage_Template_ion_input_ngModelChange_9_listener($event) {\n        i0.ɵɵtwoWayBindingSet(ctx.phoneNumber, $event) || (ctx.phoneNumber = $event);\n        return $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"ion-item\")(11, \"ion-label\", 1);\n      i0.ɵɵtext(12, \"Contrase\\u00F1a\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"ion-input\", 3);\n      i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginPage_Template_ion_input_ngModelChange_13_listener($event) {\n        i0.ɵɵtwoWayBindingSet(ctx.password, $event) || (ctx.password = $event);\n        return $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(14, \"ion-button\", 4);\n      i0.ɵɵtext(15, \"Iniciar Sesi\\u00F3n\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(9);\n      i0.ɵɵtwoWayProperty(\"ngModel\", ctx.phoneNumber);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtwoWayProperty(\"ngModel\", ctx.password);\n    }\n  },\n  dependencies: [i4.ɵNgNoValidate, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm, i3.IonButton, i3.IonContent, i3.IonHeader, i3.IonInput, i3.IonItem, i3.IonLabel, i3.IonTitle, i3.IonToolbar, i3.TextValueAccessor],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["LoginPage","constructor","apiService","router","toastController","phoneNumber","password","login","_this","_asyncToGenerator","loginData","subscribe","_ref","response","console","log","navigate","toast","create","message","duration","color","present","_x","apply","arguments","i0","ɵɵdirectiveInject","i1","ApiService","i2","Router","i3","ToastController","selectors","decls","vars","consts","template","LoginPage_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","LoginPage_Template_form_ngSubmit_5_listener","ɵɵtwoWayListener","LoginPage_Template_ion_input_ngModelChange_9_listener","$event","ɵɵtwoWayBindingSet","LoginPage_Template_ion_input_ngModelChange_13_listener","ɵɵadvance","ɵɵtwoWayProperty"],"sources":["C:\\Users\\a.campos\\source\\repos\\ionicaxion\\src\\app\\login\\login.page.ts","C:\\Users\\a.campos\\source\\repos\\ionicaxion\\src\\app\\login\\login.page.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { Router } from '@angular/router'; // Importa Router\r\nimport { ApiService } from '../services/api.service';\r\nimport { ToastController } from '@ionic/angular'; // Importa ToastController\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss'],\r\n})\r\nexport class LoginPage {\r\n  phoneNumber: string = \"\";\r\n  password: string = \"\";\r\n\r\n  constructor(\r\n    private apiService: ApiService,\r\n    private router: Router, // Inyecta Router\r\n    private toastController: ToastController // Inyecta ToastController\r\n  ) {}\r\n\r\n  async login() {\r\n    const loginData = {\r\n      phoneNumber: this.phoneNumber,\r\n      password: this.password\r\n    };\r\n\r\n    this.apiService.login(loginData).subscribe(async response => {\r\n\r\n      console.log('Response from API:', response); // <-- Agregado aquí\r\n      if (response === 'Login successful.') { // Ajusta según tu respuesta\r\n        this.router.navigate(['/home']); // Navega a la página home\r\n      } else {\r\n        // Muestra un toast con el error\r\n        const toast = await this.toastController.create({\r\n          message: response, // Usa el mensaje de error\r\n          duration: 2000,\r\n          color: 'danger' // Color del toast\r\n        });\r\n        toast.present();\r\n      }\r\n    });\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar>\r\n    <ion-title>Login</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content>\r\n  <form (ngSubmit)=\"login()\">\r\n    <ion-item>\r\n      <ion-label position=\"floating\">Número de celular</ion-label>\r\n      <ion-input [(ngModel)]=\"phoneNumber\" name=\"phoneNumber\" required></ion-input>\r\n    </ion-item>\r\n    <ion-item>\r\n      <ion-label position=\"floating\">Contraseña</ion-label>\r\n      <ion-input [(ngModel)]=\"password\" name=\"password\" type=\"password\" required></ion-input>\r\n    </ion-item>\r\n    <ion-button expand=\"full\" type=\"submit\">Iniciar Sesión</ion-button>\r\n  </form>\r\n</ion-content>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}