{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/a.campos/source/repos/ionicaxion/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _LoginPage;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/api.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@angular/forms\";\n// Define la interfaz aquí\nexport class LoginPage {\n  constructor(apiService, router,\n  // Inyecta Router\n  toastController // Inyecta ToastController\n  ) {\n    this.apiService = apiService;\n    this.router = router;\n    this.toastController = toastController;\n    this.phoneNumber = \"\";\n    this.password = \"\";\n  }\n  login() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const loginData = {\n        phoneNumber: _this.phoneNumber,\n        password: _this.password\n      };\n      console.log('LoginData from API:', loginData); // <-- Agregado aquí\n      console.log('Login Data:', JSON.stringify(loginData));\n      _this.apiService.login(loginData).subscribe( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (response) {\n          console.log('Response from API:', response);\n          if (response && response.message === 'Login successful.') {\n            // Almacena el nombre completo del usuario en localStorage\n            localStorage.setItem('fullName', response.fullName);\n            _this.router.navigate(['/home']); // Navega a la página home\n          } else {\n            // Muestra un toast con el error\n            const toast = yield _this.toastController.create({\n              message: response.message || 'Error al iniciar sesión',\n              duration: 2000,\n              color: 'danger'\n            });\n            toast.present();\n          }\n        });\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    })();\n  }\n}\n_LoginPage = LoginPage;\n_LoginPage.ɵfac = function LoginPage_Factory(__ngFactoryType__) {\n  return new (__ngFactoryType__ || _LoginPage)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.ToastController));\n};\n_LoginPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _LoginPage,\n  selectors: [[\"app-login\"]],\n  decls: 29,\n  vars: 2,\n  consts: [[2, \"background-color\", \"#D1117E\"], [2, \"background-color\", \"#D1117E\", \"padding\", \"20px\"], [2, \"text-align\", \"center\", \"margin-bottom\", \"20px\"], [\"src\", \"assets/logo.png\", \"alt\", \"Logo de Axion\", 2, \"max-width\", \"100%\", \"height\", \"auto\"], [2, \"color\", \"white\", \"margin\", \"0\"], [2, \"color\", \"white\", \"text-align\", \"center\"], [3, \"ngSubmit\"], [\"position\", \"floating\"], [\"name\", \"phoneNumber\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"name\", \"password\", \"type\", \"password\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [2, \"text-align\", \"center\", \"margin\", \"10px 0\"], [\"href\", \"#\", 2, \"color\", \"white\"], [\"expand\", \"full\", \"type\", \"submit\", 2, \"background-color\", \"black\", \"color\", \"white\"], [\"expand\", \"full\", \"routerLink\", \"/registro\", 2, \"background-color\", \"#D1117E\", \"color\", \"white\"]],\n  template: function LoginPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\", 0)(2, \"ion-title\");\n      i0.ɵɵtext(3, \"Login\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(4, \"ion-content\", 1)(5, \"div\", 2);\n      i0.ɵɵelement(6, \"img\", 3);\n      i0.ɵɵelementStart(7, \"h2\", 4);\n      i0.ɵɵtext(8, \"SANTA LUC\\u00CDA\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"h3\", 4);\n      i0.ɵɵtext(10, \"AXION SHOP\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(11, \"h4\", 5);\n      i0.ɵɵtext(12, \"Bienvenido\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"form\", 6);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginPage_Template_form_ngSubmit_13_listener() {\n        return ctx.login();\n      });\n      i0.ɵɵelementStart(14, \"ion-item\")(15, \"ion-label\", 7);\n      i0.ɵɵtext(16, \"N\\u00FAmero de celular\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"ion-input\", 8);\n      i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginPage_Template_ion_input_ngModelChange_17_listener($event) {\n        i0.ɵɵtwoWayBindingSet(ctx.phoneNumber, $event) || (ctx.phoneNumber = $event);\n        return $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(18, \"ion-item\")(19, \"ion-label\", 7);\n      i0.ɵɵtext(20, \"Contrase\\u00F1a\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"ion-input\", 9);\n      i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginPage_Template_ion_input_ngModelChange_21_listener($event) {\n        i0.ɵɵtwoWayBindingSet(ctx.password, $event) || (ctx.password = $event);\n        return $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(22, \"div\", 10)(23, \"a\", 11);\n      i0.ɵɵtext(24, \"\\u00BFOlvidaste tu contrase\\u00F1a?\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(25, \"ion-button\", 12);\n      i0.ɵɵtext(26, \"ENTRAR\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"ion-button\", 13);\n      i0.ɵɵtext(28, \" REGISTRARTE \");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(17);\n      i0.ɵɵtwoWayProperty(\"ngModel\", ctx.phoneNumber);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtwoWayProperty(\"ngModel\", ctx.password);\n    }\n  },\n  dependencies: [i4.ɵNgNoValidate, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm, i3.IonButton, i3.IonContent, i3.IonHeader, i3.IonInput, i3.IonItem, i3.IonLabel, i3.IonTitle, i3.IonToolbar, i3.TextValueAccessor, i3.RouterLinkDelegate, i2.RouterLink],\n  styles: [\"@charset \\\"UTF-8\\\";\\nion-content[_ngcontent-%COMP%] {\\n  background-image: url(\\\"./assets/fondo_general.png\\\"); \\n\\n  background-size: cover; \\n\\n  background-position: center; \\n\\n  background-repeat: no-repeat; \\n\\n}\\n\\n.custom-button[_ngcontent-%COMP%] {\\n  background-color: black !important;\\n  color: white !important;\\n}\\n\\n.register-button[_ngcontent-%COMP%] {\\n  background-color: #D1117E !important;\\n  color: white !important;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbG9naW4vbG9naW4ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGdCQUFnQjtBQUFoQjtFQUNJLG1EQUFBLEVBQUEsMENBQUE7RUFDQSxzQkFBQSxFQUFBLDJDQUFBO0VBQ0EsMkJBQUEsRUFBQSxpQ0FBQTtFQUNBLDRCQUFBLEVBQUEsa0NBQUE7QUFFSjs7QUFDRTtFQUNFLGtDQUFBO0VBQ0EsdUJBQUE7QUFFSjs7QUFDRTtFQUNFLG9DQUFBO0VBQ0EsdUJBQUE7QUFFSiIsInNvdXJjZXNDb250ZW50IjpbImlvbi1jb250ZW50IHtcclxuICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnYXNzZXRzL2ZvbmRvX2dlbmVyYWwucG5nJyk7IC8qIEFzZWfDg8K6cmF0ZSBkZSBxdWUgbGEgcnV0YSBzZWEgY29ycmVjdGEgKi9cclxuICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7IC8qIEhhY2UgcXVlIGxhIGltYWdlbiBjdWJyYSB0b2RvIGVsIGZvbmRvICovXHJcbiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7IC8qIENlbnRyYSBsYSBpbWFnZW4gZW4gZWwgZm9uZG8gKi9cclxuICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7IC8qIEV2aXRhIHF1ZSBsYSBpbWFnZW4gc2UgcmVwaXRhICovXHJcbiAgfVxyXG4gIFxyXG4gIC5jdXN0b20tYnV0dG9uIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IGJsYWNrICFpbXBvcnRhbnQ7XHJcbiAgICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDtcclxuICB9XHJcbiAgXHJcbiAgLnJlZ2lzdGVyLWJ1dHRvbiB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRDExMTdFICFpbXBvcnRhbnQ7XHJcbiAgICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDtcclxuICB9Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["LoginPage","constructor","apiService","router","toastController","phoneNumber","password","login","_this","_asyncToGenerator","loginData","console","log","JSON","stringify","subscribe","_ref","response","message","localStorage","setItem","fullName","navigate","toast","create","duration","color","present","_x","apply","arguments","i0","ɵɵdirectiveInject","i1","ApiService","i2","Router","i3","ToastController","selectors","decls","vars","consts","template","LoginPage_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵlistener","LoginPage_Template_form_ngSubmit_13_listener","ɵɵtwoWayListener","LoginPage_Template_ion_input_ngModelChange_17_listener","$event","ɵɵtwoWayBindingSet","LoginPage_Template_ion_input_ngModelChange_21_listener","ɵɵadvance","ɵɵtwoWayProperty"],"sources":["C:\\Users\\a.campos\\source\\repos\\ionicaxion\\src\\app\\login\\login.page.ts","C:\\Users\\a.campos\\source\\repos\\ionicaxion\\src\\app\\login\\login.page.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { Router } from '@angular/router'; // Importa Router\r\nimport { ApiService } from '../services/api.service';\r\nimport { ToastController } from '@ionic/angular'; // Importa ToastController\r\nimport { LoginResponse } from '../models/login-response.model'; // Asegúrate de que la ruta sea correcta\r\n\r\n\r\n// Define la interfaz aquí\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss'],\r\n})\r\nexport class LoginPage {\r\n  phoneNumber: string = \"\";\r\n  password: string = \"\";\r\n\r\n  constructor(\r\n    private apiService: ApiService,\r\n    private router: Router, // Inyecta Router\r\n    private toastController: ToastController // Inyecta ToastController\r\n  ) {}\r\n\r\n  async login() {\r\n    const loginData = {\r\n      phoneNumber: this.phoneNumber,\r\n      password: this.password\r\n    };\r\n\r\n\r\n    console.log('LoginData from API:', loginData); // <-- Agregado aquí\r\n\r\n    console.log('Login Data:', JSON.stringify(loginData));\r\n    this.apiService.login(loginData).subscribe(async (response: LoginResponse) => {\r\n      console.log('Response from API:', response);\r\n      if (response && response.message === 'Login successful.') {\r\n        // Almacena el nombre completo del usuario en localStorage\r\n        localStorage.setItem('fullName', response.fullName);\r\n\r\n        this.router.navigate(['/home']); // Navega a la página home\r\n      } else {\r\n        // Muestra un toast con el error\r\n        const toast = await this.toastController.create({\r\n          message: response.message || 'Error al iniciar sesión',\r\n          duration: 2000,\r\n          color: 'danger'\r\n        });\r\n        toast.present();\r\n      }\r\n    });\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar style=\"background-color: #D1117E;\">\r\n    <ion-title>Login</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content style=\"background-color: #D1117E; padding: 20px;\">\r\n\r\n  <!-- Logo de Axion -->\r\n  <div style=\"text-align: center; margin-bottom: 20px;\">\r\n    <img src=\"assets/logo.png\" alt=\"Logo de Axion\" style=\"max-width: 100%; height: auto;\"/>\r\n    <h2 style=\"color: white; margin: 0;\">SANTA LUCÍA</h2>\r\n    <h3 style=\"color: white; margin: 0;\">AXION SHOP</h3>\r\n  </div>\r\n\r\n  <h4 style=\"color: white; text-align: center;\">Bienvenido</h4>\r\n\r\n  <form (ngSubmit)=\"login()\">\r\n    <ion-item>\r\n      <ion-label position=\"floating\">Número de celular</ion-label>\r\n      <ion-input [(ngModel)]=\"phoneNumber\" name=\"phoneNumber\" required></ion-input>\r\n    </ion-item>\r\n    <ion-item>\r\n      <ion-label position=\"floating\">Contraseña</ion-label>\r\n      <ion-input [(ngModel)]=\"password\" name=\"password\" type=\"password\" required></ion-input>\r\n    </ion-item>\r\n\r\n    <!-- Link para recuperar contraseña -->\r\n    <div style=\"text-align: center; margin: 10px 0;\">\r\n      <a href=\"#\" style=\"color: white;\">¿Olvidaste tu contraseña?</a>\r\n    </div>\r\n\r\n    <ion-button expand=\"full\" type=\"submit\" style=\"background-color: black; color: white;\">ENTRAR</ion-button>\r\n\r\n    <!-- Botón para registrarse -->\r\n    <ion-button expand=\"full\" style=\"background-color: #D1117E; color: white;\" routerLink=\"/registro\">\r\n      REGISTRARTE\r\n    </ion-button>\r\n  </form>\r\n</ion-content>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}