{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/a.campos/source/repos/ionicaxion/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _LoginPage;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/api.service\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"@angular/forms\";\nexport class LoginPage {\n  constructor(apiService, alertController) {\n    this.apiService = apiService;\n    this.alertController = alertController;\n    this.phoneNumber = \"\";\n    this.password = \"\";\n  }\n  login() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const loginData = {\n        phoneNumber: _this.phoneNumber,\n        password: _this.password\n      };\n      _this.apiService.login(loginData).subscribe({\n        next: function () {\n          var _ref = _asyncToGenerator(function* (response) {\n            if (response === 'Login successful.') {\n              // Navegar al dashboard o página principal\n              console.log('Login exitoso');\n              // Aquí puedes redirigir a otra página, por ejemplo:\n              // this.router.navigate(['/dashboard']);\n            } else if (response === 'Invalid credentials.') {\n              yield _this.showAlert('Credenciales inválidas');\n            } else {\n              yield _this.showAlert('Respuesta inesperada: ' + response);\n            }\n          });\n          return function next(_x) {\n            return _ref.apply(this, arguments);\n          };\n        }(),\n        error: function () {\n          var _ref2 = _asyncToGenerator(function* (err) {\n            console.error('Error en el login:', err);\n            yield _this.showAlert('Ocurrió un error. Inténtalo de nuevo más tarde.');\n          });\n          return function error(_x2) {\n            return _ref2.apply(this, arguments);\n          };\n        }()\n      });\n    })();\n  }\n  showAlert(message) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const alert = yield _this2.alertController.create({\n        header: 'Información',\n        message: message,\n        buttons: ['OK']\n      });\n      yield alert.present();\n    })();\n  }\n}\n_LoginPage = LoginPage;\n_LoginPage.ɵfac = function LoginPage_Factory(__ngFactoryType__) {\n  return new (__ngFactoryType__ || _LoginPage)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.AlertController));\n};\n_LoginPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _LoginPage,\n  selectors: [[\"app-login\"]],\n  decls: 16,\n  vars: 2,\n  consts: [[3, \"submit\"], [\"position\", \"floating\"], [\"type\", \"text\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"password\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"expand\", \"full\", \"type\", \"submit\"]],\n  template: function LoginPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-title\");\n      i0.ɵɵtext(3, \"Login\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(4, \"ion-content\")(5, \"form\", 0);\n      i0.ɵɵlistener(\"submit\", function LoginPage_Template_form_submit_5_listener() {\n        return ctx.login();\n      });\n      i0.ɵɵelementStart(6, \"ion-item\")(7, \"ion-label\", 1);\n      i0.ɵɵtext(8, \"N\\u00FAmero de Celular\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"ion-input\", 2);\n      i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginPage_Template_ion_input_ngModelChange_9_listener($event) {\n        i0.ɵɵtwoWayBindingSet(ctx.phoneNumber, $event) || (ctx.phoneNumber = $event);\n        return $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"ion-item\")(11, \"ion-label\", 1);\n      i0.ɵɵtext(12, \"Contrase\\u00F1a\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"ion-input\", 3);\n      i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginPage_Template_ion_input_ngModelChange_13_listener($event) {\n        i0.ɵɵtwoWayBindingSet(ctx.password, $event) || (ctx.password = $event);\n        return $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(14, \"ion-button\", 4);\n      i0.ɵɵtext(15, \"Iniciar Sesi\\u00F3n\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(9);\n      i0.ɵɵtwoWayProperty(\"ngModel\", ctx.phoneNumber);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtwoWayProperty(\"ngModel\", ctx.password);\n    }\n  },\n  dependencies: [i3.ɵNgNoValidate, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm, i2.IonButton, i2.IonContent, i2.IonHeader, i2.IonInput, i2.IonItem, i2.IonLabel, i2.IonTitle, i2.IonToolbar, i2.TextValueAccessor],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["LoginPage","constructor","apiService","alertController","phoneNumber","password","login","_this","_asyncToGenerator","loginData","subscribe","next","_ref","response","console","log","showAlert","_x","apply","arguments","error","_ref2","err","_x2","message","_this2","alert","create","header","buttons","present","i0","ɵɵdirectiveInject","i1","ApiService","i2","AlertController","selectors","decls","vars","consts","template","LoginPage_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","LoginPage_Template_form_submit_5_listener","ɵɵtwoWayListener","LoginPage_Template_ion_input_ngModelChange_9_listener","$event","ɵɵtwoWayBindingSet","LoginPage_Template_ion_input_ngModelChange_13_listener","ɵɵadvance","ɵɵtwoWayProperty"],"sources":["C:\\Users\\a.campos\\source\\repos\\ionicaxion\\src\\app\\login\\login.page.ts","C:\\Users\\a.campos\\source\\repos\\ionicaxion\\src\\app\\login\\login.page.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { ApiService } from '../services/api.service';\r\nimport { AlertController } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss'],\r\n})\r\nexport class LoginPage {\r\n  phoneNumber: string = \"\";\r\n  password: string = \"\";\r\n\r\n  constructor(private apiService: ApiService, private alertController: AlertController) {}\r\n\r\n  async login() {\r\n    const loginData = {\r\n      phoneNumber: this.phoneNumber,\r\n      password: this.password\r\n    };\r\n\r\n    this.apiService.login(loginData).subscribe({\r\n      next: async (response) => {\r\n        if (response === 'Login successful.') {\r\n          // Navegar al dashboard o página principal\r\n          console.log('Login exitoso');\r\n          // Aquí puedes redirigir a otra página, por ejemplo:\r\n          // this.router.navigate(['/dashboard']);\r\n        } else if (response === 'Invalid credentials.') {\r\n          await this.showAlert('Credenciales inválidas');\r\n        } else {\r\n          await this.showAlert('Respuesta inesperada: ' + response);\r\n        }\r\n      },\r\n      error: async (err) => {\r\n        console.error('Error en el login:', err);\r\n        await this.showAlert('Ocurrió un error. Inténtalo de nuevo más tarde.');\r\n      }\r\n    });\r\n  }\r\n\r\n  async showAlert(message: string) {\r\n    const alert = await this.alertController.create({\r\n      header: 'Información',\r\n      message: message,\r\n      buttons: ['OK'],\r\n    });\r\n    await alert.present();\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar>\r\n    <ion-title>Login</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content>\r\n  <form (submit)=\"login()\">\r\n    <ion-item>\r\n      <ion-label position=\"floating\">Número de Celular</ion-label>\r\n      <ion-input type=\"text\" [(ngModel)]=\"phoneNumber\" required></ion-input>\r\n    </ion-item>\r\n\r\n    <ion-item>\r\n      <ion-label position=\"floating\">Contraseña</ion-label>\r\n      <ion-input type=\"password\" [(ngModel)]=\"password\" required></ion-input>\r\n    </ion-item>\r\n\r\n    <ion-button expand=\"full\" type=\"submit\">Iniciar Sesión</ion-button>\r\n  </form>\r\n</ion-content>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}