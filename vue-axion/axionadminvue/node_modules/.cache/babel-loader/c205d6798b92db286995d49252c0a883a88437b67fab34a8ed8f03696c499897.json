{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      name: '',\n      description: '',\n      categoryId: '',\n      price: '',\n      isFeatured: false,\n      image: null,\n      categories: [] // Agregar el array para las categorías\n    };\n  },\n  methods: {\n    onFileChange(e) {\n      this.image = e.target.files[0];\n    },\n    async createProduct() {\n      const formData = new FormData();\n      formData.append('name', this.name);\n      formData.append('description', this.description);\n      formData.append('categoryId', this.categoryId);\n      formData.append('price', this.price);\n      formData.append('isFeatured', this.isFeatured);\n      formData.append('image', this.image);\n      try {\n        await axios.post(`${process.env.VUE_APP_API_URL}/products/create`, formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        this.$router.push('/products');\n      } catch (error) {\n        console.error('Error creando el producto:', error);\n        alert('Hubo un error al crear el producto. Inténtalo de nuevo.');\n      }\n\n      // Limpiar el formulario\n      this.name = '';\n      this.description = '';\n      this.categoryId = '';\n      this.price = '';\n      this.isFeatured = false;\n      this.image = null;\n    },\n    async fetchCategories() {\n      try {\n        const response = await axios.get(`${process.env.VUE_APP_API_URL}/categories/all`);\n        this.categories = response.data; // Asigna la respuesta a categories\n      } catch (error) {\n        console.error('Error fetching categories:', error);\n      }\n    }\n  },\n  mounted() {\n    this.fetchCategories(); // Llama a fetchCategories al montar el componente\n  }\n};","map":{"version":3,"names":["axios","data","name","description","categoryId","price","isFeatured","image","categories","methods","onFileChange","e","target","files","createProduct","formData","FormData","append","post","process","env","VUE_APP_API_URL","headers","$router","push","error","console","alert","fetchCategories","response","get","mounted"],"sources":["C:\\Users\\a.campos\\source\\repos\\vue-axion\\axionadminvue\\src\\components\\ProductNew.vue"],"sourcesContent":["<template>\r\n  <div class=\"container mt-5\">\r\n    <h2 class=\"text-center\">Crear Nuevo Producto</h2>\r\n    <div class=\"card\">\r\n      <div class=\"card-body\">\r\n        <form @submit.prevent=\"createProduct\">\r\n          <div class=\"mb-3\">\r\n            <label for=\"name\" class=\"form-label\">Nombre:</label>\r\n            <input \r\n              v-model=\"name\" \r\n              type=\"text\" \r\n              id=\"name\" \r\n              class=\"form-control\" \r\n              required \r\n              placeholder=\"Ingresa el nombre del producto\"\r\n            >\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"description\" class=\"form-label\">Descripción:</label>\r\n            <textarea \r\n              v-model=\"description\" \r\n              id=\"description\" \r\n              class=\"form-control\" \r\n              required \r\n              placeholder=\"Ingresa una descripción\"\r\n            ></textarea>\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"categoryId\" class=\"form-label\">Categoría:</label>\r\n            <select \r\n              v-model=\"categoryId\" \r\n              id=\"categoryId\" \r\n              class=\"form-select\" \r\n              required\r\n            >\r\n              <option value=\"\" disabled>Selecciona una categoría</option>\r\n              <option v-for=\"category in categories\" :key=\"category.id\" :value=\"category.id\">\r\n                {{ category.name }}\r\n              </option>\r\n            </select>\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"price\" class=\"form-label\">Precio:</label>\r\n            <input \r\n              v-model=\"price\" \r\n              type=\"number\" \r\n              id=\"price\" \r\n              class=\"form-control\" \r\n              required \r\n              placeholder=\"Ingresa el precio del producto\"\r\n            >\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"isFeatured\" class=\"form-label\">Destacado:</label>\r\n            <input \r\n              type=\"checkbox\" \r\n              v-model=\"isFeatured\" \r\n              id=\"isFeatured\"\r\n            >\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"image\" class=\"form-label\">Imagen:</label>\r\n            <input \r\n              @change=\"onFileChange\" \r\n              type=\"file\" \r\n              id=\"image\" \r\n              class=\"form-control\" \r\n              accept=\"image/*\"\r\n            >\r\n          </div>\r\n          <div class=\"text-center\">\r\n            <button type=\"submit\" class=\"btn btn-primary\">Crear Producto</button>\r\n            <button type=\"button\" class=\"btn btn-secondary ms-3\" @click=\"$router.push('/products')\">Cancelar</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      name: '',\r\n      description: '',\r\n      categoryId: '',\r\n      price: '',\r\n      isFeatured: false,\r\n      image: null,\r\n      categories: [] // Agregar el array para las categorías\r\n    };\r\n  },\r\n  methods: {\r\n    onFileChange(e) {\r\n      this.image = e.target.files[0];\r\n    },\r\n    async createProduct() {\r\n      const formData = new FormData();\r\n      formData.append('name', this.name);\r\n      formData.append('description', this.description);\r\n      formData.append('categoryId', this.categoryId);\r\n      formData.append('price', this.price);\r\n      formData.append('isFeatured', this.isFeatured);\r\n      formData.append('image', this.image);\r\n\r\n      try {\r\n        await axios.post(`${process.env.VUE_APP_API_URL}/products/create`, formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n          }\r\n        });\r\n        this.$router.push('/products');\r\n      } catch (error) {\r\n        console.error('Error creando el producto:', error);\r\n        alert('Hubo un error al crear el producto. Inténtalo de nuevo.');\r\n      }\r\n\r\n      // Limpiar el formulario\r\n      this.name = '';\r\n      this.description = '';\r\n      this.categoryId = '';\r\n      this.price = '';\r\n      this.isFeatured = false;\r\n      this.image = null;\r\n    },\r\n    async fetchCategories() {\r\n      try {\r\n        const response = await axios.get(`${process.env.VUE_APP_API_URL}/categories/all`);\r\n        this.categories = response.data; // Asigna la respuesta a categories\r\n      } catch (error) {\r\n        console.error('Error fetching categories:', error);\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchCategories(); // Llama a fetchCategories al montar el componente\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n/* Opcional: puedes añadir estilos adicionales aquí si es necesario */\r\n</style>\r\n"],"mappings":";AAiFA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE,EAAE;MACRC,WAAW,EAAE,EAAE;MACfC,UAAU,EAAE,EAAE;MACdC,KAAK,EAAE,EAAE;MACTC,UAAU,EAAE,KAAK;MACjBC,KAAK,EAAE,IAAI;MACXC,UAAU,EAAE,EAAC,CAAE;IACjB,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPC,YAAYA,CAACC,CAAC,EAAE;MACd,IAAI,CAACJ,KAAI,GAAII,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAChC,CAAC;IACD,MAAMC,aAAaA,CAAA,EAAG;MACpB,MAAMC,QAAO,GAAI,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAE,IAAI,CAACf,IAAI,CAAC;MAClCa,QAAQ,CAACE,MAAM,CAAC,aAAa,EAAE,IAAI,CAACd,WAAW,CAAC;MAChDY,QAAQ,CAACE,MAAM,CAAC,YAAY,EAAE,IAAI,CAACb,UAAU,CAAC;MAC9CW,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAE,IAAI,CAACZ,KAAK,CAAC;MACpCU,QAAQ,CAACE,MAAM,CAAC,YAAY,EAAE,IAAI,CAACX,UAAU,CAAC;MAC9CS,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAE,IAAI,CAACV,KAAK,CAAC;MAEpC,IAAI;QACF,MAAMP,KAAK,CAACkB,IAAI,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,eAAe,kBAAkB,EAAEN,QAAQ,EAAE;UAC3EO,OAAO,EAAE;YACP,cAAc,EAAE;UAClB;QACF,CAAC,CAAC;QACF,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,WAAW,CAAC;MAChC,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;QAClDE,KAAK,CAAC,yDAAyD,CAAC;MAClE;;MAEA;MACA,IAAI,CAACzB,IAAG,GAAI,EAAE;MACd,IAAI,CAACC,WAAU,GAAI,EAAE;MACrB,IAAI,CAACC,UAAS,GAAI,EAAE;MACpB,IAAI,CAACC,KAAI,GAAI,EAAE;MACf,IAAI,CAACC,UAAS,GAAI,KAAK;MACvB,IAAI,CAACC,KAAI,GAAI,IAAI;IACnB,CAAC;IACD,MAAMqB,eAAeA,CAAA,EAAG;MACtB,IAAI;QACF,MAAMC,QAAO,GAAI,MAAM7B,KAAK,CAAC8B,GAAG,CAAC,GAAGX,OAAO,CAACC,GAAG,CAACC,eAAe,iBAAiB,CAAC;QACjF,IAAI,CAACb,UAAS,GAAIqB,QAAQ,CAAC5B,IAAI,EAAE;MACnC,EAAE,OAAOwB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;MACpD;IACF;EACF,CAAC;EACDM,OAAOA,CAAA,EAAG;IACR,IAAI,CAACH,eAAe,CAAC,CAAC,EAAE;EAC1B;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}